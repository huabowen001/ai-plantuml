# 💖 打赏功能演示说明

## 功能概览

本项目已成功添加打赏功能，支持在两个页面显示：
1. **主页面** (PlantUML Server) - 右上角固定按钮
2. **AI页面** (AI PlantUML Generator) - 导航栏打赏按钮

---

## 主页面效果

### 1. 打赏按钮位置
- **位置**: 页面右上角固定
- **样式**: 红色渐变背景，带心形图标
- **动画**: 呼吸效果，hover悬停时上移
- **响应式**: 
  - 桌面端：显示"❤️ 打赏"文字
  - 移动端：仅显示心形图标

### 2. 打赏弹窗
点击按钮后弹出模态框，包含：
- 标题：💖 打赏支持
- 说明文字：引导用户打赏
- **微信收款码区域**：
  - 如已上传图片：显示收款码
  - 未上传图片：显示占位符和上传提示
- **微信号显示**：
  - 绿色高亮显示
  - 一键复制功能
  - 复制成功提示

### 3. 交互特性
- ✅ ESC键关闭弹窗
- ✅ 点击背景关闭弹窗
- ✅ 点击关闭按钮关闭
- ✅ 复制成功有视觉反馈

---

## AI页面效果

### 1. 打赏按钮位置
- **位置**: 导航栏右侧，用户名旁边
- **样式**: 红色文字，心形图标
- **文字**: "❤️ 打赏"

### 2. 打赏弹窗
与主页面类似，使用页面原有的modal样式，包含：
- 标题和说明
- 收款码显示区域
- 微信号及复制功能

### 3. 集成特性
- ✅ 使用现有的Toast通知系统
- ✅ 复制成功显示绿色提示
- ✅ 复制失败显示红色提示
- ✅ 点击外部区域关闭弹窗

---

## 视觉效果

### 桌面端主页面
```
┌─────────────────────────────────────────────────┐
│  PlantUML Server                   [💖 打赏]   │
│─────────────────────────────────────────────────│
│                                                  │
│  [编辑器]              [预览]                    │
│                                                  │
└─────────────────────────────────────────────────┘
```

### 移动端主页面
```
┌──────────────────────┐
│  PlantUML     [💖]  │
│──────────────────────│
│                      │
│  [编辑器]            │
│                      │
│  [预览]              │
│                      │
└──────────────────────┘
```

### 打赏弹窗
```
╔════════════════════════════════════╗
║         💖 打赏支持                ║
║────────────────────────────────────║
║  如果您觉得这个工具对您有帮助，    ║
║  欢迎打赏支持！                    ║
║                                    ║
║    ┌─────────────────┐            ║
║    │                 │            ║
║    │  [微信收款码]   │            ║
║    │                 │            ║
║    └─────────────────┘            ║
║                                    ║
║  微信号: wxid_abc123  [复制]     ║
║                                    ║
║              [关闭]                ║
╚════════════════════════════════════╝
```

---

## 技术实现

### 主页面
- **按钮组件**: `donate-button.jsp` (内联样式和HTML)
- **弹窗组件**: `donate.jsp` + `donate.css` + `donate.js`
- **集成方式**: 
  - `header.jsp` 引入按钮
  - `index.jsp` 引入弹窗
  - `modals.js` 初始化功能

### AI页面
- **按钮位置**: `ai-plantuml.jsp` 导航栏
- **弹窗代码**: `ai-plantuml.jsp` 内联HTML
- **JavaScript**: `ai-app.js` (新增打赏相关函数)

### 兼容性
- ✅ Chrome/Edge (最新版)
- ✅ Firefox (最新版)
- ✅ Safari (最新版)
- ✅ 移动端浏览器
- ✅ 深色主题适配

### 功能特性
1. **现代Clipboard API**: 优先使用
2. **降级方案**: 支持旧浏览器的execCommand
3. **响应式设计**: 自适应各种屏幕尺寸
4. **主题适配**: 自动适应深色/浅色主题
5. **动画效果**: 
   - 按钮呼吸动画
   - 弹窗淡入效果
   - hover悬停效果

---

## 用户体验流程

### 场景1: 用户首次打赏

1. 用户使用工具完成图表创建
2. 注意到右上角醒目的打赏按钮
3. 点击按钮，弹出打赏窗口
4. 看到收款码，使用微信扫码支付
5. 或复制微信号，手动添加好友转账

### 场景2: 移动端用户打赏

1. 移动端用户点击右上角心形图标
2. 弹窗显示收款码
3. 长按收款码保存到相册
4. 打开微信，识别相册中的二维码
5. 完成支付

### 场景3: 无收款码情况

1. 用户点击打赏按钮
2. 看到占位符和提示
3. 可以复制微信号
4. 手动添加好友进行转账

---

## 配置说明

### 快速配置 (推荐)

```bash
# 运行配置脚本
./configure-donate.sh

# 按提示输入您的微信号即可
```

### 手动配置

#### 1. 主页面
编辑 `src/main/webapp/components/modals/donate/donate.js`:
```javascript
const WECHAT_ID = "your_wechat_id";  // 改为您的微信号
```

#### 2. AI页面
编辑 `src/main/webapp/js/ai-app.js`:
```javascript
const DONATE_WECHAT_ID = "your_wechat_id";  // 改为您的微信号
```

#### 3. 添加收款码
将微信收款码图片保存为:
```
src/main/webapp/assets/wechat-pay.png
```

### 重新编译

```bash
mvn clean package
```

---

## 测试检查清单

- [ ] 主页面打赏按钮显示正常
- [ ] 点击按钮弹出窗口
- [ ] 收款码图片显示正常（如已上传）
- [ ] 微信号显示正确
- [ ] 复制微信号功能正常
- [ ] ESC键可关闭弹窗
- [ ] 点击背景可关闭弹窗
- [ ] AI页面打赏按钮显示正常
- [ ] AI页面弹窗功能正常
- [ ] 移动端显示正常
- [ ] 深色主题显示正常

---

## 常见问题

### Q: 打赏按钮不显示？
A: 
1. 确认已重新编译项目
2. 清除浏览器缓存
3. 检查浏览器控制台是否有错误

### Q: 收款码不显示？
A: 
1. 确认图片路径正确：`src/main/webapp/assets/wechat-pay.png`
2. 确认图片格式（PNG/JPG/SVG）
3. 重新编译项目

### Q: 复制功能不工作？
A: 
1. 检查浏览器版本是否过旧
2. 确认网站使用HTTPS（某些浏览器要求）
3. 查看浏览器控制台错误信息

### Q: 想修改按钮颜色？
A: 编辑 `src/main/webapp/components/header/donate-button.jsp`，找到：
```css
background: linear-gradient(135deg, #ff6b6b, #ff8e53);
```
改为您喜欢的颜色。

---

## 进一步定制

### 修改按钮位置
编辑 `donate-button.jsp` 中的CSS：
```css
.donate-button-container {
  position: fixed;
  top: 1rem;      /* 距离顶部 */
  right: 1rem;    /* 距离右侧 */
}
```

### 修改弹窗样式
编辑 `src/main/webapp/components/modals/donate/donate.css`

### 添加其他支付方式
在 `donate.jsp` 中添加更多支付二维码区域

---

## 反馈与支持

如有问题或建议，请：
1. 查看 `DONATE_SETUP.md` 详细配置文档
2. 检查项目 Issue 列表
3. 提交新的 Issue

---

**享受您的新打赏功能吧！** 💖

